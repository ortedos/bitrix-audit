# BRD — Платформа аудита сайтов на 1С-Битрикс

## 1. Цели продукта
Создать гибридную (облако + модуль) модульно-расширяемую платформу аудита сайтов на 1С-Битрикс, обеспечивающую быстрый и точный поиск технических и SEO-проблем, с выдачей отчётов под разные роли и встроенной конверсией в доработки.

**Ключевая ценность:**
- Увеличение конверсии в доработки ≥ 10% (гипотеза).
- Сокращение времени поиска и устранения проблем.
- Масштабируемость функционала за счёт модульной архитектуры.
- Возможность white-label для агентств.

---

## 2. Целевые сегменты и JTBD

| Сегмент               | JTBD |
|-----------------------|------|
| Веб-студия            | «Когда клиент говорит “сайт не работает”, хочу быстро найти причину и дать обоснованный отчёт» |
| SEO-оптимизатор       | «Когда позиции падают, хочу понять, какие техошибки мешают продвижению» |
| Владелец сайта        | «Когда сомневаюсь в работоспособности сайта, хочу простой отчёт с рекомендациями» |
| Партнёрское агентство / интегратор | «Когда хочу предложить аудит клиентам под своим брендом, мне нужен white-label и API» |

---

## 3. Scope и Non-Scope

**Scope (MVP):**
- Лид-магнит (публичный тест URL).
- Модуль 1С-Битрикс с базовыми тестами.
- Интеграции с Lighthouse, Google Search Console, Яндекс.Вебмастер.
- White-label (минимальная версия).
- История аудитов без ограничений.
- Ролевая модель доступа.

**Non-Scope (MVP, перенос в R2):**
- Планировщик и графики изменений.
- Расширенные API для сторонних сервисов.
- Автопочинка ошибок (не планируется).

---

## 4. Стейкхолдеры

| Роль             | Ответственность |
|------------------|-----------------|
| Product Owner    | Постановка целей, приоритетов, контроль реализации |
| Business Analyst | BRD, экономика, KPI, риски |
| UX/UI Designer   | Проектирование интерфейсов лид-магнита, ЛК, отчётов |
| Архитектор       | Архитектура гибридного решения, интеграции |
| Dev              | Разработка модуля и облачного сервиса |
| QA               | Разработка тест-кейсов, тестирование |
| DevOps/Sec       | CI/CD, мониторинг, безопасность, хранение данных |
| Support          | Обработка запросов, сбор фидбэка |
| Marketing        | Лидогенерация, PR |

---

## 5. Бизнес-правила

1. Лид-магнит доступен без регистрации, но с урезанным функционалом.
2. Полный аудит доступен только зарегистрированным пользователям.
3. Хранение доступов (логин/пароль/API-ключи) — только локально на стороне клиента, в зашифрованном виде (AES-256).
4. White-label доступен только на платных тарифах.
5. Все аудиты хранятся в истории без ограничения срока.

---

## 6. KPI-дерево

### Цель верхнего уровня:
↑ Конверсия в доработки ≥ 10% и стабильная выручка от подписки.

### Разветвление:

**1. Техническое качество**
- Снижение критических ошибок ≥ 50% (Источник: логи аудитов).
- Средний скоринг ≥ 80/100 (Источник: модуль оценки).

**2. Воронка лидов**
- Лид-магнит → регистрация ≥ 20% (Источник: веб-аналитика + CRM).
- Регистрация → запуск аудита ≥ 60% (Источник: CRM + события приложения).
- Отчёт → обращение ≥ 10% (Источник: CRM).
- Обращение → оплата ≥ 30% (Источник: CRM + биллинг).

**3. Производительность и доступность**
- SLA ≥ 99% (Источник: мониторинг).
- Время аудита ≤ 5 мин для сайтов до 100 страниц (Источник: замеры выполнения).

**4. White-label удержание**
- +20% Retention Rate к агентствам без white-label (Источник: CRM + биллинг).

---

## 7. Экономическая модель (Base Scenario)

| Показатель  | Значение | Формула / Методика |
|-------------|----------|--------------------|
| CAC         | 1 200 ₽  | Маркетинг / привлечённые клиенты |
| ARPU        | 800 ₽/мес| Выручка / платящие клиенты |
| LTV         | 9 600 ₽  | ARPU × удержание (12 мес) |
| ROI (год)   | 700%     | (Выручка − Затраты) / Затраты × 100% |
| TCO (год)   | 2,4 млн ₽| CAPEX + OPEX |
| Payback     | 2 мес    | CAC / (ARPU × конверсия в платёж) |
| Churn rate  | 8%/мес   | Потерянные / Всего |
| Gross Margin| 85%      | (Выручка − переменные затраты) / Выручка |

### Сценарный анализ

| Сценарий | Конверсия в платёж | ARPU | LTV | ROI | Payback |
|----------|-------------------|------|-----|-----|---------|
| Worst    | 3%                 | 600 ₽ | 7 200 ₽ | 300% | 4 мес |
| Base     | 5%                 | 800 ₽ | 9 600 ₽ | 700% | 2 мес |
| Best     | 8%                 | 1 000 ₽ | 12 000 ₽ | 1 000% | 1,25 мес |

---

## 8. Гипотезы и план валидации

1. Комплексный аудит ↑ конверсию в доработки ≥ 10% — проверка на 10 пилотных сайтах.
2. White-label ↑ удержание агентств ≥ 20% — кастдев и когорный анализ.
3. Интеграции ↑ полноту отчётов ≥ 30% — A/B-тест.

**Методы проверки:** A/B-тесты, кастдев, сравнительный анализ когорт.

---

## 9. Приоритизация (MoSCoW + RICE)

**Must:** Лид-магнит, модуль Битрикс, базовые тесты, интеграции, история аудитов.  
**Should:** White-label, ролевая модель доступа, коллаборация.  
**Could:** Планировщик, расширенные API.  
**Won’t:** Автопочинка ошибок.

---

## 10. Процессы (BPMN — текст)

1. Пользователь вводит URL в лид-магнит → система сканирует сайт (частично облако, частично модуль) → выдаёт результат (скоринг, ключевые ошибки, CTA «Сделать полный аудит»).
2. Зарегистрированный пользователь запускает аудит из ЛК → сервис выполняет тесты → формирует HTML/PDF-отчёт.
3. При наличии white-label агентство выдаёт отчёт клиенту под своим брендом.

---

## 11. Модель данных (ERD)

**Сущности:**
- User (id, name, email, role)
- Site (id, domain, owner_id)
- Audit (id, site_id, date, score)
- Test (id, name, category, weight)
- Result (audit_id, test_id, status, penalty)
- Report (id, audit_id, format, branded)
- APIIntegration (id, type, credentials)
- Comment (id, report_id, user_id, text)
- Task (id, report_id, assignee_id, status)

---

## 12. Матрица CRUD

| Сущность       | Create | Read | Update | Delete |
|----------------|--------|------|--------|--------|
| User           | Dev    | All  | Dev    | Admin  |
| Site           | User   | User | User   | User   |
| Audit          | Sys    | User | —      | Admin  |
| Test           | Admin  | All  | Admin  | Admin  |
| Result         | Sys    | User | —      | Admin  |
| Report         | Sys    | User | —      | Admin  |
| APIIntegration | User   | User | User   | User   |
| Comment        | User   | User | User   | User   |
| Task           | User   | User | User   | User   |

---

## 13. Риски и соответствие нормам

| Риск                                  | Impact | Likelihood | План смягчения |
|---------------------------------------|--------|------------|----------------|
| Ограничения сторонних API             | High   | High       | Кэширование, альтернативы |
| Поддержка старых версий Bitrix         | Medium | Medium     | Модульная адаптация |
| Изменения лицензий Bitrix              | High   | Low        | Мониторинг изменений |
| Нарушение 152-ФЗ / GDPR                | High   | Low        | Локальное хранение, AES-256 |
| Требования к сертификации Marketplace  | Medium | Low        | Подготовка документации |

---

## 14. Требования к измерению KPI

- **Методы:** события в аналитике (Google Analytics, Яндекс.Метрика), события в CRM и биллинге.
- **Частота замеров:** ежемесячно.
- **Ответственные:** BA (сбор и интерпретация), аналитик (инструменты), PO (утверждение).

---

## 15. Передача (Handoff)

**UX:**
- Персоны: веб-студия, SEO, владелец сайта, партнёрское агентство.
- Сценарии: лид-магнит, аудит в ЛК, white-label отчёт.
- Ограничения: простота отчётов для владельцев.

**Architect:**
- Интеграции: Lighthouse, GSC, Яндекс.Вебмастер.
- SLA ≥ 99%, ≤ 5 мин аудит, AES-256, PHP 7.4–8.2.
- Гибридная архитектура.

**QA:**
- Бизнес-критичные сценарии (User Stories 1–3).
- Acceptance Criteria из PRD.

**DevOps/Sec:**
- Среда: облако + Bitrix-модуль.
- Логирование, мониторинг.
- Хранение секретов локально.

**PO:**
- Противоречий с PRD нет.
- Экономическая модель и KPI закреплены.
- Итоговая неопределённость: 0%.
