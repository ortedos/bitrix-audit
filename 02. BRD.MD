# BRD v2 — Платформа аудита сайтов на 1С‑Битрикс

## 0. Трассировка к PRD

* Видение, цели MVP, воронка, KPI, scope/non‑scope — подтверждены в PRD.  &#x20;
* Mini‑backlog и исключения из MVP — учтены.&#x20;
* Функциональные/нефункциональные требования — синхронизированы. &#x20;
* Тарифы Free/Pro/Agency, ИИ‑фичи, дашборды/алерты, безопасность — добавлены в BRD из разделов «Концепт».   &#x20;

---

## 1. Цели и ценностное предложение

**Цель:** гибридная (облако + модуль) платформа аудита сайтов на 1С‑Битрикс, быстро и точно выявляющая тех/SEO‑проблемы, выдающая отчёты под разные роли и конвертирующая аудит в доработки.&#x20;

**Ключевая ценность для сегментов:** снижение времени диагностики, рост конверсии в доработки (≥10%, гипотеза), прозрачный отчёт для заказчиков, white‑label для агентств.&#x20;

---

## 2. Сегменты и JTBD

| Сегмент                          | JTBD                                                       |
| -------------------------------- | ---------------------------------------------------------- |
| Веб‑студия                       | Быстро найти причины проблем и выдать обоснованный отчёт.  |
| SEO‑оптимизатор                  | Понять техошибки, мешающие продвижению.                    |
| Владелец сайта                   | Получить простой отчёт с рекомендациями.                   |
| Партнёрское агентство/интегратор | Нужны white‑label и API для интеграции аудита в процессы.  |

---

## 3. Scope / Non‑Scope

### 3.1. Scope (MVP)

* Лид‑магнит (публичный тест URL, частичный отчёт без регистрации).&#x20;
* Модуль Битрикс с базовыми тестами.&#x20;
* Интеграции: Lighthouse / GSC / Яндекс.Вебмастер.&#x20;
* История аудитов, ролевая модель доступа, HTML‑отчёты.&#x20;
* White‑label (минимум: логотип и контакты).&#x20;

**Дополнения из PRD (включено в BRD):**

* Экспорт отчётов PDF/CSV; сравнение запусков; алерты.&#x20;
* ИИ‑объяснения, авто‑диагност (prioritization impact×effort), автогенерация задач (ClickUp/Jira/YouTrack), RAG‑сниппеты.&#x20;

### 3.2. Non‑Scope (MVP; перенос)

* Планировщик, графики изменений, расширенные API; автопочинка ошибок (не планируется). &#x20;

---

## 4. Бизнес‑правила

1. Лид‑магнит выдаёт общий скоринг + 2–3 ключевые ошибки, CTA на регистрацию.&#x20;
2. Полный аудит — после регистрации; отчёт доступен в ЛК/экспорте.&#x20;
3. White‑label — платные тарифы.&#x20;
4. Хранение доступов локально/зашифровано (AES‑256), подпись запросов модуля. &#x20;

---

## 5. KPI‑дерево и воронка

### 5.1. Цели верхнего уровня

* ↓ критических ошибок ≥50%; средний скоринг ≥80/100.&#x20;
* Воронка: лид‑магнит→регистрация ≥20%; отчёт→обращение ≥10%; обращение→оплата (целевой таргет BRD: ≥30%).&#x20;

### 5.2. Расширение KPI по тарифам (из PRD)

* Конверсия Free→Pro/Agency; Retention по Pro/Agency; среднее число сайтов/запусков на аккаунт. (источники: веб‑аналитика, CRM, биллинг, продуктовая аналитика).&#x20;

### 5.3. Источники и методика измерений

* **Веб‑аналитика:** GA/Я.Метрика (события «lead\_test\_done», «cta\_full\_audit\_click»).
* **CRM:** статусы лид→сделка→оплата; источники «аудит/отчёт».
* **Биллинг:** платежи/планы (Free/Pro/Agency), ретеншен когорт.
* **Продуктовая аналитика:** «audit\_started», «report\_viewed», «export\_pdf», «alert\_triggered».
* Частота: ежемесячно; ответственные: BA/аналитик; SLA метрики — DevOps.

---

## 6. Монетизация и тарифы

* **Free:** 1 сайт, 3 запуска/мес, базовый отчёт + PageSpeed.
* **Pro:** 3–5 сайтов, расписание, алерты, интеграции, экспорт, ИИ‑объяснения.
* **Agency:** 20–∞ сайтов, командные роли, white‑label, вебхуки.&#x20;

**KPI монетизации:** конверсия Free→Pro/Agency; ARPU по тарифам; upgrade/downgrade rate; churn по тарифам.

---

## 7. Экономическая модель (обновлено)

### 7.1. Допущения ARPU/структуры выручки

* ARPU/мес: Free = 0 ₽; Pro = 800 ₽; Agency = 2 500 ₽ (допущение для BRD).
* Микс платящих в базе: Pro 70%, Agency 30% (допущение).
* Переменные издержки на платящего: 15% выручки (хостинг/API/генерация отчётов).

### 7.2. Базовые метрики

| Метрика      | Значение / Цель         | Метод                             |
| ------------ | ----------------------- | --------------------------------- |
| CAC          | ≤ 1 200 ₽               | маркетинг / новые платящие        |
| LTV          | ≥ 9 600 ₽ (Pro, 12 мес) | ARPU × удержание (мес)            |
| Gross Margin | ≥ 85%                   | (Выручка − переменные) / Выручка  |
| Payback      | ≤ 2 мес                 | CAC / (ARPU × конверсия в платёж) |

(значения целей согласованы ранее и перенесены в PRD).&#x20;

### 7.3. Сценарный анализ (12 мес)

| Сценарий | Конверсия в платёж |    ARPU |      LTV | ROI (год) |  Payback |
| -------- | -----------------: | ------: | -------: | --------: | -------: |
| Worst    |                 3% |   600 ₽ |  7 200 ₽ |      300% |    4 мес |
| Base     |                 5% |   800 ₽ |  9 600 ₽ |      700% |    2 мес |
| Best     |                 8% | 1 000 ₽ | 12 000 ₽ |    1 000% | 1,25 мес |

*(Расчёты и детализация по тарифам вынесены в приложение к BRD; допущения помечены.)*

---

## 8. Методика скоринга 0–100 и весов тестов

**Итоговый скор:** 100 − Σ(штрафы тестов), нижняя граница 0.
**Вес по критичности/влиянию:**

* P0 (доступность/HTTPS/5xx): 8–10.
* P1 (производительность/JS‑ошибки): 5–7.
* P2 (SEO‑разметка/заголовки/мета): 3–4.
* P3 (минорные дефекты верстки): 0,5–2.

**Коэфф. покрытия:** ошибки на части страниц умножаются на коэффициент (≤50% страниц → ×0,5).
**Категории соответствуют ядру проверок:** скорость & Web Vitals, SEO‑техника, контентные сигналы, инфраструктура, специфика Битрикс. &#x20;

---

## 9. Процессы (BPMN — текст)

1. **Лид‑магнит:** ввод URL → облако/модуль выполняют базовые тесты → выдаётся общий скоринг + 2–3 ошибки → CTA «Сделать полный аудит».&#x20;
2. **Полный аудит:** регистрация/логин → запуск аудита → выполнение тестов (облако/локально) → отчёт (веб + PDF/CSV) → опционально: экспорт задач в ClickUp/Jira/YouTrack. &#x20;
3. **Алерты:** триггеры по метрикам (например, LCP>4s на сегменте трафика) → уведомления e‑mail/Slack/Telegram.&#x20;
4. **White‑label:** оформление отчёта брендингом (логотип/контакты в MVP).&#x20;

---

## 10. Модель данных (ERD — перечень сущностей)

* **accounts, users (RBAC), projects, sites, runs, metrics, findings, attachments** (база); **plans, subscriptions, invoices** (биллинг); **alerts, webhooks, integrations**.&#x20;
  Ключевые связи: account 1‑N users; project 1‑N sites; site 1‑N runs; run 1‑N findings; findings N‑M metrics; account 1‑N subscriptions → plan.

---

## 11. Матрица CRUD/событий (укрупнённо)

| Сущность                  | Create | Read  | Update | Delete | События                                   |
| ------------------------- | ------ | ----- | ------ | ------ | ----------------------------------------- |
| Account/Plan/Subscription | Admin  | Admin | Admin  | Admin  | plan\_changed, invoice\_paid              |
| Project/Site              | User   | User  | User   | User   | site\_added, site\_removed                |
| Run/Metric/Finding        | System | User  | System | Admin  | audit\_started/finished, alert\_triggered |
| Report                    | System | User  | —      | Admin  | report\_exported                          |
| Integration/Webhook       | User   | User  | User   | User   | webhook\_sent                             |

---

## 12. Нефункциональные требования

* Время полного аудита ≤5 мин (≤100 страниц); SLA ≥99%; совместимость PHP 7.4–8.2.&#x20;
* Масштабирование воркеров (Docker/K8s/ECS), очереди BullMQ/Celery; TimescaleDB для временных рядов; S3‑совместимое хранилище; Redis для кэша.&#x20;
* Безопасность: AES‑256, KMS/Vault, подпись запросов модуля, минимизация PII.&#x20;

---

## 13. Риски и соответствие

| Риск                               | Impact | Likelihood | Смягчение                                                  |
| ---------------------------------- | -----: | ---------: | ---------------------------------------------------------- |
| Лимиты внешних API (Google/Яндекс) |   High |       High | Кэш/ретраи/backoff; мониторинг квот; деградация graceful.  |
| Антибот‑защита сайтов              | Medium |     Medium | Тесты через модуль/приватные зоны; user‑agent политики.    |
| Разнородные конфиги Битрикс        | Medium |     Medium | Декларативные правила (YAML/JSON), профили.                |
| Стабильность воркеров              | Medium |     Medium | Контейнерная изоляция, health‑checks, автоскейлинг.        |
| Старые версии Битрикс              | Medium |     Medium | Модульная адаптация; приоритизация тестов.                 |
| 152‑ФЗ/GDPR                        |   High |        Low | Локальное хранение доступов, шифрование, DPA/ToS.          |

---

## 14. Приоритизация (MoSCoW + RICE)

* **Must:** лид‑магнит, модуль, базовые тесты, интеграции, история.&#x20;
* **Should:** white‑label (минимум), роли/коллаборация, экспорт, алерты.&#x20;
* **Could:** планировщик, расширенные API, углубленные ИИ‑фичи.&#x20;
* **Won’t (R1):** автопочинка ошибок.&#x20;

---

## 15. MVP и релизы

* **MVP (≈1 мес):** лид‑магнит, модуль с базовыми тестами, интеграции, white‑label (минимум).&#x20;
* **R2:** планировщик, графики изменений, расширенные API, углубление ИИ‑функций.&#x20;

---

## 16. Handoff‑пакеты

**UX** — экраны: портфельный дашборд (сводный скоринг/тренды/P0‑проблемы), деталка Web Vitals, SEO‑карта, сравнение запусков, экспорт/алерты; white‑label отчёты (брендинг в MVP: логотип/контакты). &#x20;

**Architect** — 2‑слойная архитектура (SaaS + модуль), стек: NestJS/FastAPI, Redis, PostgreSQL/TimescaleDB, S3, Docker/K8s/ECS; очереди; API провайдеров; требования по масштабированию.&#x20;

**QA** — бизнес‑критичные сценарии (User Stories 1–3) и AC из PRD; тестирование экспорта/алертов/ИИ‑объяснений. &#x20;

**DevOps/Sec** — SLA/мониторинг/бэкапы; хранение секретов (KMS/Vault), подпись запросов модуля; политика логирования и минимизация PII.&#x20;

**PO** — подтверждённые KPI/воронка/экономика; перечень допущений и рисков; план валидации (10 реальных сайтов; сбор фидбэка; анализ конверсий).&#x20;

---

## 17. План валидации

* Пилоты: ≥10 реальных сайтов; сравнение конверсий и качества отчётов; A/B на интеграциях и white‑label когортно.&#x20;
* Метрики успеха MVP: достижение KPI воронки (20% и 10%), средний скор ≥80, снижение P0/P1 ≥50%.

---

## 18. Соответствие и политика данных

* 152‑ФЗ/GDPR: локальное хранение доступов; шифрование AES‑256; DPA/ToS; аудит доступа; минимизация PII.&#x20;
* Логи: без чувствительных данных; ротирование; доступ по ролям.

---

## 19. Приложения

### A. Таблица весов тестов (черновик для конфигурации)

| Категория | Примеры                                                  | Вес   |
| --------- | -------------------------------------------------------- | ----- |
| P0        | 5xx, отсутствие HTTPS, robots запрещает ключевые разделы | 8–10  |
| P1        | LCP/INP за пределами порогов, критические JS‑ошибки      | 5–7   |
| P2        | meta/OG/schema, заголовки, hreflang/canonical            | 3–4   |
| P3        | мелкие вёрсточные дефекты                                | 0,5–2 |

### B. Таксономия событий

`lead_test_done`, `cta_full_audit_click`, `signup`, `audit_started`, `report_viewed`, `export_pdf`, `alert_triggered`, `task_exported`.

### C. Формулы KPI (выборка)

* **Conversion(lm→reg)** = рег./уник. посетителей страницы результата лид‑магнита ×100%.
* **Retention(Agency WL)** = (осталось через N мес / когорта WL‑агентств на старте) ×100%.
* **Churn** = ушедшие / платящие на начало периода.

### D. Изменения vs BRD v1 (чек‑лист)

* Добавлены тарифы Free/Pro/Agency + KPI монетизации.&#x20;
* Включены ИИ‑функции (объяснения, авто‑диагност, задачи, RAG), алерты, экспорт/сравнение. &#x20;
* Расширена методика скоринга и матрица весов.
* Уточнены процессы/ERD/CRUD, NFR и риски из PRD.

## **Дополнения от PO к BRD v2**

### 1. Экономика и KPI

* **ARPU (MVP)**: Pro — 800 ₽/мес, Agency — 2 500 ₽/мес; пересмотр после 3 мес эксплуатации.
* **Конверсия Free→Pro/Agency**: целевой KPI — 5 % в первые 3 мес, +3–5 % рост ежеквартально.
* **Retention WL**: N-месячный cohort-based, горизонт 12 мес.
* KPI воронки считать по **уникальным пользователям**.

### 2. Scope и функционал

* **Explain-mode (ИИ)**: в MVP — базовая версия, текстовые пояснения для P0/P1 проблем.
* **Алерты**: MVP — 1–2 предустановленных триггера; конфигурируемый модуль — R2.
* **Интеграции с таск-системами**: R2, но API-hook закладываем в MVP.

### 3. Аналитика и методики

* Веса тестов, предложенные в BRD, **утверждены**; корректировка возможна после консультации с SEO и Dev.
* Продуктовая аналитика: GA4 + Я.Метрика + Amplitude (MVP); Mixpanel — не используется.

### 4. Риски и ограничения

* **API-квоты**: стартуем в базовых лимитах, параллельно запрашиваем расширение.
* **Оффлайн-режим**: полный — не нужен; частичное локальное выполнение в модуле — да.
* **Сертификация Marketplace**: перенос в R2.


### **1. Scope**

* Добавить в **Scope (MVP)**:

  * «Конверсионная аналитика для 1С-Битрикс» (минимальная версия: Яндекс.Директ, путь клиента ≤10 шагов, отчёт CSV).
* В **Non-Scope (перенос в R2)**:

  * Интеграции с VK Ads, Google Ads, MyTarget.
  * Визуализация пути клиента и расширенная аналитика.

---

### **2. KPI**

* **Новые KPI**:

  * Снижение потерь конверсий ≥ 90% (методика: сравнение кол-ва визитов и заказов до и после внедрения).
  * Экономия времени на подготовку отчётности ≥ 50% (методика: опрос маркетологов/студий).
  * ROI/ROAS по источникам — добавляется в KPI-дерево.

---

### **3. Экономическая модель**

* Появляется **новый value driver** для сегмента Pro/Agency:

  * Потенциальный апгрейд клиентов на более дорогой тариф из-за наличия аналитики.
  * Возможность дополнительной монетизации (отдельная плата за модуль аналитики в R2).
* В LTV добавить uplift от удержания клиентов, которые используют аналитику (допущение: +10% LTV).

---

### **4. Интеграции**

* Добавить в список обязательных интеграций MVP: **Яндекс.Директ API** (загрузка кликов, показов, затрат).
* Архитектурно предусмотреть подключение VK Ads / Google Ads в R2.
* Хранилище событий и UTM в **отдельной облачной PostgreSQL**, чтобы не грузить основную БД Bitrix.

---

### **5. Риски**

* Новые риски:

  * Лимиты API рекламных кабинетов (Impact — High, Likelihood — Medium).
  * Соответствие требованиям 152-ФЗ при хранении данных о визитах и UTM (Impact — High, Likelihood — Low).
  * Возможные расхождения между отчётами рекламных платформ и системой (Impact — Medium, Likelihood — Medium).

---

### **6. Передача другим ролям**

* **UX**: новый интерфейс — таблица отчётов по каналам, кнопка экспорта CSV, базовая визуализация пути клиента (линейный список).
* **Architect**: добавить схему интеграции Bitrix-модуля с облачным PostgreSQL и API Яндекс.Директа.
* **QA**: тестирование корректности сбора UTM, привязки визитов к заказам, сверка с данными из Яндекс.Директ.
* **DevOps/Sec**: требования к шифрованию данных визитов в облаке и безопасной передаче токенов API.

---
